<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Sound Chess - Your Audio Mate</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚ôüÔ∏è</text></svg>">
    <link rel="stylesheet"
          href="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css"
          integrity="sha384-q94+BZtLrkL1/ohfjR8c6L+A6qzNH9R2hBLwyoAfu3i/WCvQjzL2RQJ3uNHDISdU"
          crossorigin="anonymous">
    <link rel="stylesheet" href="css/styles.css">
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <div id="container">
        <h1>Sound Chess</h1>
        <p class="subtitle">Your Audio Mate ‚Äî Voice-controlled chess analysis with Stockfish and master games</p>
        
        <!-- Voice Control Section -->
        <div class="voice-control">
            <button id="voiceBtn" class="voice-btn">
                <span id="voiceBtnText">üé§ Start Voice</span>
            </button>
            <div id="voiceStatus" class="voice-status">Click to start voice recognition</div>
            <div id="voiceTranscript" class="voice-transcript"></div>
        </div>

        <!-- Chess Board -->
        <div id="board-container">
            <div id="myBoard"></div>
        </div>

        <!-- Controls -->
        <div class="controls">
            <button id="resetBtn" class="control-btn" title="Reset board">
                <i data-lucide="rotate-ccw"></i>
            </button>
            <button id="undoBtn" class="control-btn" title="Undo move">
                <i data-lucide="undo-2"></i>
            </button>
            <button id="flipBtn" class="control-btn" title="Flip board">
                <i data-lucide="arrow-up-down"></i>
            </button>
            <button id="soundBtn" class="control-btn sound-btn" title="Toggle sound">
                <i data-lucide="volume-2" class="sound-on-icon"></i>
                <i data-lucide="volume-x" class="sound-off-icon"></i>
            </button>
            <button id="themeBtn" class="control-btn theme-btn" title="Toggle dark mode">
                <i data-lucide="sun" class="light-icon"></i>
                <i data-lucide="moon" class="dark-icon"></i>
            </button>
            <button id="helpBtn" class="control-btn help-btn" title="Voice commands">
                <i data-lucide="help-circle"></i>
            </button>
        </div>

        <!-- Engine Mode Controls -->
        <div class="engine-controls" id="engineControls">
            <div class="engine-control-group">
                <button id="engineModeBtn" class="engine-mode-btn" title="Toggle engine mode">
                    <span id="engineModeText">Analysis Mode</span>
                </button>
            </div>
            <div class="engine-control-group" id="engineColorGroup" style="display: none;">
                <label class="engine-label">Engine plays:</label>
                <div class="color-selector">
                    <button id="engineWhiteBtn" class="color-btn" data-color="w">White</button>
                    <button id="engineBlackBtn" class="color-btn" data-color="b">Black</button>
                </div>
            </div>
            <div class="engine-control-group" id="grandmasterGroup" style="display: none;">
                <label class="engine-label">
                    <input type="checkbox" id="grandmasterModeCheckbox">
                    <span>Grandmaster Mode</span>
                </label>
            </div>
            <div class="engine-control-group" id="grandmasterInfoGroup" style="display: none;">
                <div id="grandmasterInfo" class="grandmaster-info"></div>
            </div>
        </div>

        <!-- Analysis Display -->
        <div class="analysis-section">
            <div class="analysis-panel">
                <h2>Top Engine Moves</h2>
                <div id="engineMoves" class="moves-list">
                    <p class="placeholder">Make a move to see engine analysis</p>
                </div>
            </div>
            
            <div class="analysis-panel">
                <h2>Master Games</h2>
                <div id="masterMoves" class="moves-list">
                    <p class="placeholder">Make a move to see master games</p>
                </div>
            </div>
        </div>

        <!-- Status Info -->
        <div class="status-info">
            <div>Status: <span id="status">Ready</span></div>
            <div>FEN: <span id="fen">-</span></div>
            <div>Move History: <span id="moveHistory">-</span></div>
        </div>
    </div>

    <!-- Commands Help Modal -->
    <div id="commandsModal" class="modal">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <h2>üé§ Voice Commands</h2>
            
            <div class="commands-grid">
                <div class="command-section">
                    <h3>‚ôüÔ∏è Making Moves</h3>
                    <ul>
                        <li><strong>"e4"</strong> - Pawn to e4</li>
                        <li><strong>"knight f3"</strong> - Knight to f3</li>
                        <li><strong>"bishop c4"</strong> - Bishop to c4</li>
                        <li><strong>"queen d1 to h5"</strong> - Queen from d1 to h5</li>
                        <li><strong>"castle kingside"</strong> - Short castle</li>
                        <li><strong>"castle queenside"</strong> - Long castle</li>
                        <li><strong>"e takes d5"</strong> - Pawn captures</li>
                        <li><strong>"pawn takes d5"</strong> - Pawn captures (auto-detect)</li>
                        <li><strong>"takes"</strong> - Make the only/best capture</li>
                    </ul>
                </div>
                
                <div class="command-section">
                    <h3>üéÆ Game Controls</h3>
                    <ul>
                        <li><strong>"undo"</strong> - Undo last move</li>
                        <li><strong>"reset"</strong> - Reset the board</li>
                        <li><strong>"flip"</strong> - Flip the board</li>
                        <li><strong>"sound on/off"</strong> - Toggle sound</li>
                    </ul>
                </div>
                
                <div class="command-section">
                    <h3>ü§ñ Engine Mode</h3>
                    <ul>
                        <li><strong>"engine plays white"</strong> - Play as Black vs engine</li>
                        <li><strong>"engine plays black"</strong> - Play as White vs engine</li>
                        <li><strong>"grandmaster plays white"</strong> - Play as Black vs grandmaster</li>
                        <li><strong>"grandmaster plays black"</strong> - Play as White vs grandmaster</li>
                        <li><strong>"analysis mode"</strong> - Return to two-player</li>
                        <li><strong>"grandmaster mode"</strong> - Toggle grandmaster mode (engine mode only)</li>
                        <li><strong>"enable grandmaster"</strong> - Turn on grandmaster mode</li>
                        <li><strong>"disable grandmaster"</strong> - Turn off grandmaster mode</li>
                    </ul>
                </div>
                
                <div class="command-section">
                    <h3>‚è∏Ô∏è Other</h3>
                    <ul>
                        <li><strong>"pause"</strong> - Stop listening for moves</li>
                        <li><strong>"resume"</strong> - Start listening again</li>
                        <li><strong>"dark mode"</strong> - Switch to dark theme</li>
                        <li><strong>"light mode"</strong> - Switch to light theme</li>
                        <li><strong>"show commands"</strong> - Show this help</li>
                    </ul>
                </div>
            </div>
            
            <p class="modal-tip">üí° <strong>Tip:</strong> Speak clearly and pause briefly between words for best recognition.</p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
            integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2"
            crossorigin="anonymous"></script>
    <script src="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js"
            integrity="sha384-8Vi8VHwn3vjQ9eUHUxex3JSN/NFqUg3QbPyX8kWyb93+8AC/pPWTzj+nHtbC5bxD"
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.js"></script>
    <script src="js/app.js" defer></script>
    <script>
        // Initialize Lucide icons after DOM loads
        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();
        });
    </script>
</body>
</html>


